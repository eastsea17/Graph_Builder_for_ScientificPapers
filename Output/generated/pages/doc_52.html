<style>
.lx-highlight { position: relative; border-radius:3px; padding:1px 2px;}
.lx-highlight .lx-tooltip {
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
  background: #333;
  color: #fff;
  text-align: left;
  border-radius: 4px;
  padding: 6px 8px;
  position: absolute;
  z-index: 1000;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  max-width: 240px;
  white-space: normal;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.lx-highlight:hover .lx-tooltip { visibility: visible; opacity:1; }
.lx-animated-wrapper { max-width: 100%; font-family: Arial, sans-serif; }
.lx-controls {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 8px;
  padding: 12px; margin-bottom: 16px;
}
.lx-button-row {
  display: flex; justify-content: center; gap: 8px; margin-bottom: 12px;
}
.lx-control-btn {
  background: #4285f4; color: white; border: none; border-radius: 4px;
  padding: 8px 16px; cursor: pointer; font-size: 13px; font-weight: 500;
  transition: background-color 0.2s;
}
.lx-control-btn:hover { background: #3367d6; }
.lx-progress-container {
  margin-bottom: 8px;
}
.lx-progress-slider {
  width: 100%; margin: 0; appearance: none; height: 6px;
  background: #ddd; border-radius: 3px; outline: none;
}
.lx-progress-slider::-webkit-slider-thumb {
  appearance: none; width: 18px; height: 18px; background: #4285f4;
  border-radius: 50%; cursor: pointer;
}
.lx-progress-slider::-moz-range-thumb {
  width: 18px; height: 18px; background: #4285f4; border-radius: 50%;
  cursor: pointer; border: none;
}
.lx-status-text {
  text-align: center; font-size: 12px; color: #666; margin-top: 4px;
}
.lx-text-window {
  font-family: monospace; white-space: pre-wrap; border: 1px solid #90caf9;
  padding: 12px; max-height: 260px; overflow-y: auto; margin-bottom: 12px;
  line-height: 1.6;
}
.lx-attributes-panel {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 6px;
  padding: 8px 10px; margin-top: 8px; font-size: 13px;
}
.lx-current-highlight {
  border-bottom: 4px solid #ff4444;
  font-weight: bold;
  animation: lx-pulse 1s ease-in-out;
}
@keyframes lx-pulse {
  0% { text-decoration-color: #ff4444; }
  50% { text-decoration-color: #ff0000; }
  100% { text-decoration-color: #ff4444; }
}
.lx-legend {
  font-size: 12px; margin-bottom: 8px;
  padding-bottom: 8px; border-bottom: 1px solid #e0e0e0;
}
.lx-label {
  display: inline-block;
  padding: 2px 4px;
  border-radius: 3px;
  margin-right: 4px;
  color: #000;
}
.lx-attr-key {
  font-weight: 600;
  color: #1565c0;
  letter-spacing: 0.3px;
}
.lx-attr-value {
  font-weight: 400;
  opacity: 0.85;
  letter-spacing: 0.2px;
}

/* Add optimizations with larger fonts and better readability for GIFs */
.lx-gif-optimized .lx-text-window { font-size: 16px; line-height: 1.8; }
.lx-gif-optimized .lx-attributes-panel { font-size: 15px; }
.lx-gif-optimized .lx-current-highlight { text-decoration-thickness: 4px; }
</style>
<div class="lx-animated-wrapper lx-gif-optimized">
  <div class="lx-attributes-panel">
    <div class="lx-legend">Highlights Legend: <span class="lx-label" style="background-color:#D2E3FC;">Background</span> <span class="lx-label" style="background-color:#C8E6C9;">Methodology</span> <span class="lx-label" style="background-color:#FEF0C3;">Purpose</span> <span class="lx-label" style="background-color:#F9DEDC;">Results</span></div>
    <div id="attributesContainer"></div>
  </div>
  <div class="lx-text-window" id="textWindow">
    There is consensus among scholars and policy makers that <span class="lx-highlight lx-current-highlight" data-idx="0" style="background-color:#D2E3FC;">knowledge is</span> one of the key drivers of long-run economic growth. It is also clear from the literature that not all knowledge has the same value. However, too often in <span class="lx-highlight" data-idx="1" style="background-color:#D2E3FC;">economic geography and</span> cognate fields we have been obsessed with counting knowledge inputs and outputs rather than assessing the quality of knowledge produced. In this article we <span class="lx-highlight" data-idx="2" style="background-color:#FEF0C3;">measure the complexity of knowledge</span>, we <span class="lx-highlight" data-idx="3" style="background-color:#FEF0C3;">map the distribution and</span> the evolution of knowledge complexity in US cities, and we <span class="lx-highlight" data-idx="4" style="background-color:#FEF0C3;">explore how the spatial diffusion of knowledge is linked to</span> complexity. Our <span class="lx-highlight" data-idx="5" style="background-color:#C8E6C9;">knowledge complexity index</span> rests on the bimodal network models of Hidalgo and Hausmann. <span class="lx-highlight" data-idx="6" style="background-color:#C8E6C9;">Analysis</span> is based on more than two million patent records from the US Patent and Trademark Office that identify the technological structure of US metropolitan areas in terms of the patent classes in which they are most active between 1975 and 2010. We find that <span class="lx-highlight" data-idx="7" style="background-color:#F9DEDC;">knowledge complexity is unevenly distributed across the United States</span> and that <span class="lx-highlight" data-idx="8" style="background-color:#F9DEDC;">cities with</span> the most complex technological structures are not necessarily those with the highest rates of patenting. Citation data indicate that <span class="lx-highlight" data-idx="9" style="background-color:#F9DEDC;">more complex patents are less likely to be cited</span> than less complex patents when citing and cited patents are located in different metropolitan areas.
  </div>
  <div class="lx-controls">
    <div class="lx-button-row">
      <button class="lx-control-btn" onclick="playPause()">▶️ Play</button>
      <button class="lx-control-btn" onclick="prevExtraction()">⏮ Previous</button>
      <button class="lx-control-btn" onclick="nextExtraction()">⏭ Next</button>
    </div>
    <div class="lx-progress-container">
      <input type="range" id="progressSlider" class="lx-progress-slider"
             min="0" max="9" value="0"
             onchange="jumpToExtraction(this.value)">
    </div>
    <div class="lx-status-text">
      Entity <span id="entityInfo">1/10</span> |
      Pos <span id="posInfo">[57-69]</span>
    </div>
  </div>
</div>

<script>
  (function() {
    const extractions = [{"index": 0, "class": "Background", "text": "Knowledge is recognized as a key driver of long-run economic growth, but not all knowledge has the same value", "color": "#D2E3FC", "startPos": 57, "endPos": 69, "beforeText": "There is consensus among scholars and policy makers that ", "extractionText": "knowledge is", "afterText": " one of the key drivers of long-run economic growth. It is also clear from the literature that not all knowledge has the same value. However, too ofte", "attributesHtml": "<div><strong>class:</strong> Background</div><div><strong>attributes:</strong> {}</div>"}, {"index": 1, "class": "Background", "text": "Economic geography and related fields have focused on counting knowledge inputs/outputs rather than assessing knowledge quality", "color": "#D2E3FC", "startPos": 224, "endPos": 246, "beforeText": "of the key drivers of long-run economic growth. It is also clear from the literature that not all knowledge has the same value. However, too often in ", "extractionText": "economic geography and", "afterText": " cognate fields we have been obsessed with counting knowledge inputs and outputs rather than assessing the quality of knowledge produced. In this arti", "attributesHtml": "<div><strong>class:</strong> Background</div><div><strong>attributes:</strong> {}</div>"}, {"index": 2, "class": "Purpose", "text": "Measure the complexity of knowledge using a novel index", "color": "#FEF0C3", "startPos": 403, "endPos": 438, "beforeText": "e fields we have been obsessed with counting knowledge inputs and outputs rather than assessing the quality of knowledge produced. In this article we ", "extractionText": "measure the complexity of knowledge", "afterText": ", we map the distribution and the evolution of knowledge complexity in US cities, and we explore how the spatial diffusion of knowledge is linked to c", "attributesHtml": "<div><strong>class:</strong> Purpose</div><div><strong>attributes:</strong> {}</div>"}, {"index": 3, "class": "Purpose", "text": "Map the distribution and evolution of knowledge complexity across US cities", "color": "#FEF0C3", "startPos": 443, "endPos": 467, "beforeText": "ting knowledge inputs and outputs rather than assessing the quality of knowledge produced. In this article we measure the complexity of knowledge, we ", "extractionText": "map the distribution and", "afterText": " the evolution of knowledge complexity in US cities, and we explore how the spatial diffusion of knowledge is linked to complexity. Our knowledge comp", "attributesHtml": "<div><strong>class:</strong> Purpose</div><div><strong>attributes:</strong> {}</div>"}, {"index": 4, "class": "Purpose", "text": "Explore how the spatial diffusion of knowledge is linked to its complexity", "color": "#FEF0C3", "startPos": 527, "endPos": 586, "beforeText": "duced. In this article we measure the complexity of knowledge, we map the distribution and the evolution of knowledge complexity in US cities, and we ", "extractionText": "explore how the spatial diffusion of knowledge is linked to", "afterText": " complexity. Our knowledge complexity index rests on the bimodal network models of Hidalgo and Hausmann. Analysis is based on more than two million pa", "attributesHtml": "<div><strong>class:</strong> Purpose</div><div><strong>attributes:</strong> {}</div>"}, {"index": 5, "class": "Methodology", "text": "Knowledge complexity index based on bimodal network models by Hidalgo and Hausmann", "color": "#C8E6C9", "startPos": 603, "endPos": 629, "beforeText": "stribution and the evolution of knowledge complexity in US cities, and we explore how the spatial diffusion of knowledge is linked to complexity. Our ", "extractionText": "knowledge complexity index", "afterText": " rests on the bimodal network models of Hidalgo and Hausmann. Analysis is based on more than two million patent records from the US Patent and Tradema", "attributesHtml": "<div><strong>class:</strong> Methodology</div><div><strong>attributes:</strong> {}</div>"}, {"index": 6, "class": "Methodology", "text": "Analysis of more than 2 million patent records from US Patent and Trademark Office", "color": "#C8E6C9", "startPos": 691, "endPos": 699, "beforeText": "e spatial diffusion of knowledge is linked to complexity. Our knowledge complexity index rests on the bimodal network models of Hidalgo and Hausmann. ", "extractionText": "Analysis", "afterText": " is based on more than two million patent records from the US Patent and Trademark Office that identify the technological structure of US metropolitan", "attributesHtml": "<div><strong>class:</strong> Methodology</div><div><strong>attributes:</strong> {}</div>"}, {"index": 7, "class": "Results", "text": "Knowledge complexity is unevenly distributed across the United States", "color": "#F9DEDC", "startPos": 953, "endPos": 1022, "beforeText": "the technological structure of US metropolitan areas in terms of the patent classes in which they are most active between 1975 and 2010. We find that ", "extractionText": "knowledge complexity is unevenly distributed across the United States", "afterText": " and that cities with the most complex technological structures are not necessarily those with the highest rates of patenting. Citation data indicate ", "attributesHtml": "<div><strong>class:</strong> Results</div><div><strong>attributes:</strong> {}</div>"}, {"index": 8, "class": "Results", "text": "Cities with most complex technological structures are not necessarily those with highest patenting rates", "color": "#F9DEDC", "startPos": 1032, "endPos": 1043, "beforeText": "sses in which they are most active between 1975 and 2010. We find that knowledge complexity is unevenly distributed across the United States and that ", "extractionText": "cities with", "afterText": " the most complex technological structures are not necessarily those with the highest rates of patenting. Citation data indicate that more complex pat", "attributesHtml": "<div><strong>class:</strong> Results</div><div><strong>attributes:</strong> {}</div>"}, {"index": 9, "class": "Results", "text": "More complex patents are less likely to be cited when citing and cited patents are in different metropolitan areas", "color": "#F9DEDC", "startPos": 1177, "endPos": 1225, "beforeText": "that cities with the most complex technological structures are not necessarily those with the highest rates of patenting. Citation data indicate that ", "extractionText": "more complex patents are less likely to be cited", "afterText": " than less complex patents when citing and cited patents are located in different metropolitan areas.", "attributesHtml": "<div><strong>class:</strong> Results</div><div><strong>attributes:</strong> {}</div>"}];
    let currentIndex = 0;
    let isPlaying = false;
    let animationInterval = null;
    let animationSpeed = 1.0;

    function updateDisplay() {
      const extraction = extractions[currentIndex];
      if (!extraction) return;

      document.getElementById('attributesContainer').innerHTML = extraction.attributesHtml;
      document.getElementById('entityInfo').textContent = (currentIndex + 1) + '/' + extractions.length;
      document.getElementById('posInfo').textContent = '[' + extraction.startPos + '-' + extraction.endPos + ']';
      document.getElementById('progressSlider').value = currentIndex;

      const playBtn = document.querySelector('.lx-control-btn');
      if (playBtn) playBtn.textContent = isPlaying ? '⏸ Pause' : '▶️ Play';

      const prevHighlight = document.querySelector('.lx-text-window .lx-current-highlight');
      if (prevHighlight) prevHighlight.classList.remove('lx-current-highlight');
      const currentSpan = document.querySelector('.lx-text-window span[data-idx="' + currentIndex + '"]');
      if (currentSpan) {
        currentSpan.classList.add('lx-current-highlight');
        currentSpan.scrollIntoView({block: 'center', behavior: 'smooth'});
      }
    }

    function nextExtraction() {
      currentIndex = (currentIndex + 1) % extractions.length;
      updateDisplay();
    }

    function prevExtraction() {
      currentIndex = (currentIndex - 1 + extractions.length) % extractions.length;
      updateDisplay();
    }

    function jumpToExtraction(index) {
      currentIndex = parseInt(index);
      updateDisplay();
    }

    function playPause() {
      if (isPlaying) {
        clearInterval(animationInterval);
        isPlaying = false;
      } else {
        animationInterval = setInterval(nextExtraction, animationSpeed * 1000);
        isPlaying = true;
      }
      updateDisplay();
    }

    window.playPause = playPause;
    window.nextExtraction = nextExtraction;
    window.prevExtraction = prevExtraction;
    window.jumpToExtraction = jumpToExtraction;

    updateDisplay();
  })();
</script>