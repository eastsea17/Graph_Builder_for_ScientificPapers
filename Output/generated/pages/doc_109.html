<style>
.lx-highlight { position: relative; border-radius:3px; padding:1px 2px;}
.lx-highlight .lx-tooltip {
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
  background: #333;
  color: #fff;
  text-align: left;
  border-radius: 4px;
  padding: 6px 8px;
  position: absolute;
  z-index: 1000;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  max-width: 240px;
  white-space: normal;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.lx-highlight:hover .lx-tooltip { visibility: visible; opacity:1; }
.lx-animated-wrapper { max-width: 100%; font-family: Arial, sans-serif; }
.lx-controls {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 8px;
  padding: 12px; margin-bottom: 16px;
}
.lx-button-row {
  display: flex; justify-content: center; gap: 8px; margin-bottom: 12px;
}
.lx-control-btn {
  background: #4285f4; color: white; border: none; border-radius: 4px;
  padding: 8px 16px; cursor: pointer; font-size: 13px; font-weight: 500;
  transition: background-color 0.2s;
}
.lx-control-btn:hover { background: #3367d6; }
.lx-progress-container {
  margin-bottom: 8px;
}
.lx-progress-slider {
  width: 100%; margin: 0; appearance: none; height: 6px;
  background: #ddd; border-radius: 3px; outline: none;
}
.lx-progress-slider::-webkit-slider-thumb {
  appearance: none; width: 18px; height: 18px; background: #4285f4;
  border-radius: 50%; cursor: pointer;
}
.lx-progress-slider::-moz-range-thumb {
  width: 18px; height: 18px; background: #4285f4; border-radius: 50%;
  cursor: pointer; border: none;
}
.lx-status-text {
  text-align: center; font-size: 12px; color: #666; margin-top: 4px;
}
.lx-text-window {
  font-family: monospace; white-space: pre-wrap; border: 1px solid #90caf9;
  padding: 12px; max-height: 260px; overflow-y: auto; margin-bottom: 12px;
  line-height: 1.6;
}
.lx-attributes-panel {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 6px;
  padding: 8px 10px; margin-top: 8px; font-size: 13px;
}
.lx-current-highlight {
  border-bottom: 4px solid #ff4444;
  font-weight: bold;
  animation: lx-pulse 1s ease-in-out;
}
@keyframes lx-pulse {
  0% { text-decoration-color: #ff4444; }
  50% { text-decoration-color: #ff0000; }
  100% { text-decoration-color: #ff4444; }
}
.lx-legend {
  font-size: 12px; margin-bottom: 8px;
  padding-bottom: 8px; border-bottom: 1px solid #e0e0e0;
}
.lx-label {
  display: inline-block;
  padding: 2px 4px;
  border-radius: 3px;
  margin-right: 4px;
  color: #000;
}
.lx-attr-key {
  font-weight: 600;
  color: #1565c0;
  letter-spacing: 0.3px;
}
.lx-attr-value {
  font-weight: 400;
  opacity: 0.85;
  letter-spacing: 0.2px;
}

/* Add optimizations with larger fonts and better readability for GIFs */
.lx-gif-optimized .lx-text-window { font-size: 16px; line-height: 1.8; }
.lx-gif-optimized .lx-attributes-panel { font-size: 15px; }
.lx-gif-optimized .lx-current-highlight { text-decoration-thickness: 4px; }
</style>
<div class="lx-animated-wrapper lx-gif-optimized">
  <div class="lx-attributes-panel">
    <div class="lx-legend">Highlights Legend: <span class="lx-label" style="background-color:#D2E3FC;">Methodology</span> <span class="lx-label" style="background-color:#C8E6C9;">Purpose</span> <span class="lx-label" style="background-color:#FEF0C3;">Results</span></div>
    <div id="attributesContainer"></div>
  </div>
  <div class="lx-text-window" id="textWindow">
    Objective. To <span class="lx-highlight lx-current-highlight" data-idx="0" style="background-color:#C8E6C9;">systematically</span> evaluate the efficacy, safety, and precision of TMTP for COVID-19. Methods. Randomized controlled trials and retrospective studies were searched in 11 electronic databases. This network meta-analysis included trials using TMTP to treat patients with COVID-19. The traditional <span class="lx-highlight" data-idx="1" style="background-color:#D2E3FC;">pairwise meta-analysis was done by using Stata 15, and Bayesian network meta-analysis was done with WinBUGS.</span> Results. 18 trials were included with 2036 participants and 7 drugs. The results showed that <span class="lx-highlight" data-idx="2" style="background-color:#FEF0C3;">LHQW</span> had the most significant effects on improving expectoration, shortness of breath, sore throat, nausea, emesis, inappetence, muscle soreness, and headache, and it could produce the least adverse reactions. <span class="lx-highlight" data-idx="3" style="background-color:#FEF0C3;">XBJ was</span> the best drug for fever, fatigue, and diarrhea, which showed great advantages in lowering WBC levels. XFBD was the most effective drug for cough and chest distress, which had the least exacerbation rate. <span class="lx-highlight" data-idx="4" style="background-color:#FEF0C3;">JHQG was</span> the most effective for rhinobyon and rhinorrhea, while QFPD was the best drug in decreasing CRP levels. Conclusion. This study was the first most large-scale and comprehensive research of TMTP for COVID-19. The results showed that LHQW had good efficacy without obvious adverse reactions. Therefore, we believe that it should be firstly recommended for COVID-19 treatment. In addition, XBJ is recommended for patients with a severe fever, fatigue, and diarrhea, and JHQG is recommended for patients with obvious rhinobyon and rhinorrhea; then, XFBD is recommended for patients with cough and chest tightness as the main manifestation. Our findings will help experts develop new COVID-19 treatment guidelines to better guide clinical medication for protecting the health of COVID-19 patients.
  </div>
  <div class="lx-controls">
    <div class="lx-button-row">
      <button class="lx-control-btn" onclick="playPause()">▶️ Play</button>
      <button class="lx-control-btn" onclick="prevExtraction()">⏮ Previous</button>
      <button class="lx-control-btn" onclick="nextExtraction()">⏭ Next</button>
    </div>
    <div class="lx-progress-container">
      <input type="range" id="progressSlider" class="lx-progress-slider"
             min="0" max="4" value="0"
             onchange="jumpToExtraction(this.value)">
    </div>
    <div class="lx-status-text">
      Entity <span id="entityInfo">1/5</span> |
      Pos <span id="posInfo">[14-28]</span>
    </div>
  </div>
</div>

<script>
  (function() {
    const extractions = [{"index": 0, "class": "Purpose", "text": "Systematically assess the efficacy, safety, and precision of traditional medicine treatment protocols (TMTP) for COVID-19.", "color": "#C8E6C9", "startPos": 14, "endPos": 28, "beforeText": "Objective. To ", "extractionText": "systematically", "afterText": " evaluate the efficacy, safety, and precision of TMTP for COVID-19. Methods. Randomized controlled trials and retrospective studies were searched in 1", "attributesHtml": "<div><strong>class:</strong> Purpose</div><div><strong>attributes:</strong> {}</div>"}, {"index": 1, "class": "Methodology", "text": "Conducted pairwise meta\u2011analysis with Stata 15 and Bayesian network meta\u2011analysis with WinBUGS.", "color": "#D2E3FC", "startPos": 305, "endPos": 413, "beforeText": "dies were searched in 11 electronic databases. This network meta-analysis included trials using TMTP to treat patients with COVID-19. The traditional ", "extractionText": "pairwise meta-analysis was done by using Stata 15, and Bayesian network meta-analysis was done with WinBUGS.", "afterText": " Results. 18 trials were included with 2036 participants and 7 drugs. The results showed that LHQW had the most significant effects on improving expec", "attributesHtml": "<div><strong>class:</strong> Methodology</div><div><strong>attributes:</strong> {}</div>"}, {"index": 2, "class": "Results", "text": "LHQW provided the most comprehensive symptom relief with the fewest adverse reactions.", "color": "#FEF0C3", "startPos": 507, "endPos": 511, "beforeText": "nd Bayesian network meta-analysis was done with WinBUGS. Results. 18 trials were included with 2036 participants and 7 drugs. The results showed that ", "extractionText": "LHQW", "afterText": " had the most significant effects on improving expectoration, shortness of breath, sore throat, nausea, emesis, inappetence, muscle soreness, and head", "attributesHtml": "<div><strong>class:</strong> Results</div><div><strong>attributes:</strong> {}</div>"}, {"index": 3, "class": "Results", "text": "XBJ was superior for fever, fatigue, diarrhea and lowered WBC; XFBD excelled for cough and chest distress with low exacerbation rates.", "color": "#FEF0C3", "startPos": 717, "endPos": 724, "beforeText": "tion, shortness of breath, sore throat, nausea, emesis, inappetence, muscle soreness, and headache, and it could produce the least adverse reactions. ", "extractionText": "XBJ was", "afterText": " the best drug for fever, fatigue, and diarrhea, which showed great advantages in lowering WBC levels. XFBD was the most effective drug for cough and ", "attributesHtml": "<div><strong>class:</strong> Results</div><div><strong>attributes:</strong> {}</div>"}, {"index": 4, "class": "Results", "text": "JHQG was most effective for rhinobyon/rhinorrhea, while QFPD best reduced CRP levels.", "color": "#FEF0C3", "startPos": 929, "endPos": 937, "beforeText": "showed great advantages in lowering WBC levels. XFBD was the most effective drug for cough and chest distress, which had the least exacerbation rate. ", "extractionText": "JHQG was", "afterText": " the most effective for rhinobyon and rhinorrhea, while QFPD was the best drug in decreasing CRP levels. Conclusion. This study was the first most lar", "attributesHtml": "<div><strong>class:</strong> Results</div><div><strong>attributes:</strong> {}</div>"}];
    let currentIndex = 0;
    let isPlaying = false;
    let animationInterval = null;
    let animationSpeed = 1.0;

    function updateDisplay() {
      const extraction = extractions[currentIndex];
      if (!extraction) return;

      document.getElementById('attributesContainer').innerHTML = extraction.attributesHtml;
      document.getElementById('entityInfo').textContent = (currentIndex + 1) + '/' + extractions.length;
      document.getElementById('posInfo').textContent = '[' + extraction.startPos + '-' + extraction.endPos + ']';
      document.getElementById('progressSlider').value = currentIndex;

      const playBtn = document.querySelector('.lx-control-btn');
      if (playBtn) playBtn.textContent = isPlaying ? '⏸ Pause' : '▶️ Play';

      const prevHighlight = document.querySelector('.lx-text-window .lx-current-highlight');
      if (prevHighlight) prevHighlight.classList.remove('lx-current-highlight');
      const currentSpan = document.querySelector('.lx-text-window span[data-idx="' + currentIndex + '"]');
      if (currentSpan) {
        currentSpan.classList.add('lx-current-highlight');
        currentSpan.scrollIntoView({block: 'center', behavior: 'smooth'});
      }
    }

    function nextExtraction() {
      currentIndex = (currentIndex + 1) % extractions.length;
      updateDisplay();
    }

    function prevExtraction() {
      currentIndex = (currentIndex - 1 + extractions.length) % extractions.length;
      updateDisplay();
    }

    function jumpToExtraction(index) {
      currentIndex = parseInt(index);
      updateDisplay();
    }

    function playPause() {
      if (isPlaying) {
        clearInterval(animationInterval);
        isPlaying = false;
      } else {
        animationInterval = setInterval(nextExtraction, animationSpeed * 1000);
        isPlaying = true;
      }
      updateDisplay();
    }

    window.playPause = playPause;
    window.nextExtraction = nextExtraction;
    window.prevExtraction = prevExtraction;
    window.jumpToExtraction = jumpToExtraction;

    updateDisplay();
  })();
</script>