<style>
.lx-highlight { position: relative; border-radius:3px; padding:1px 2px;}
.lx-highlight .lx-tooltip {
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
  background: #333;
  color: #fff;
  text-align: left;
  border-radius: 4px;
  padding: 6px 8px;
  position: absolute;
  z-index: 1000;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  max-width: 240px;
  white-space: normal;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.lx-highlight:hover .lx-tooltip { visibility: visible; opacity:1; }
.lx-animated-wrapper { max-width: 100%; font-family: Arial, sans-serif; }
.lx-controls {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 8px;
  padding: 12px; margin-bottom: 16px;
}
.lx-button-row {
  display: flex; justify-content: center; gap: 8px; margin-bottom: 12px;
}
.lx-control-btn {
  background: #4285f4; color: white; border: none; border-radius: 4px;
  padding: 8px 16px; cursor: pointer; font-size: 13px; font-weight: 500;
  transition: background-color 0.2s;
}
.lx-control-btn:hover { background: #3367d6; }
.lx-progress-container {
  margin-bottom: 8px;
}
.lx-progress-slider {
  width: 100%; margin: 0; appearance: none; height: 6px;
  background: #ddd; border-radius: 3px; outline: none;
}
.lx-progress-slider::-webkit-slider-thumb {
  appearance: none; width: 18px; height: 18px; background: #4285f4;
  border-radius: 50%; cursor: pointer;
}
.lx-progress-slider::-moz-range-thumb {
  width: 18px; height: 18px; background: #4285f4; border-radius: 50%;
  cursor: pointer; border: none;
}
.lx-status-text {
  text-align: center; font-size: 12px; color: #666; margin-top: 4px;
}
.lx-text-window {
  font-family: monospace; white-space: pre-wrap; border: 1px solid #90caf9;
  padding: 12px; max-height: 260px; overflow-y: auto; margin-bottom: 12px;
  line-height: 1.6;
}
.lx-attributes-panel {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 6px;
  padding: 8px 10px; margin-top: 8px; font-size: 13px;
}
.lx-current-highlight {
  border-bottom: 4px solid #ff4444;
  font-weight: bold;
  animation: lx-pulse 1s ease-in-out;
}
@keyframes lx-pulse {
  0% { text-decoration-color: #ff4444; }
  50% { text-decoration-color: #ff0000; }
  100% { text-decoration-color: #ff4444; }
}
.lx-legend {
  font-size: 12px; margin-bottom: 8px;
  padding-bottom: 8px; border-bottom: 1px solid #e0e0e0;
}
.lx-label {
  display: inline-block;
  padding: 2px 4px;
  border-radius: 3px;
  margin-right: 4px;
  color: #000;
}
.lx-attr-key {
  font-weight: 600;
  color: #1565c0;
  letter-spacing: 0.3px;
}
.lx-attr-value {
  font-weight: 400;
  opacity: 0.85;
  letter-spacing: 0.2px;
}

/* Add optimizations with larger fonts and better readability for GIFs */
.lx-gif-optimized .lx-text-window { font-size: 16px; line-height: 1.8; }
.lx-gif-optimized .lx-attributes-panel { font-size: 15px; }
.lx-gif-optimized .lx-current-highlight { text-decoration-thickness: 4px; }
</style>
<div class="lx-animated-wrapper lx-gif-optimized">
  <div class="lx-attributes-panel">
    <div class="lx-legend">Highlights Legend: <span class="lx-label" style="background-color:#D2E3FC;">Background</span> <span class="lx-label" style="background-color:#C8E6C9;">Purpose</span> <span class="lx-label" style="background-color:#FEF0C3;">Results</span></div>
    <div id="attributesContainer"></div>
  </div>
  <div class="lx-text-window" id="textWindow">
    The objective of the study is <span class="lx-highlight lx-current-highlight" data-idx="0" style="background-color:#C8E6C9;">to systematically evaluate the efficacy of four Chinese patent medicines in combination with angiotensin-converting enzyme inhibitors/angiotensin receptor blockers (ACEI/ARB) in the treatment of <span class="lx-highlight" data-idx="1" style="background-color:#D2E3FC;">early diabetic nephropathy (DN)</span>. Retrospectively, previously published randomized controlled trials (RCTs) of four different Chinese patent medicines combined with ACEI or ARB in the treatment of patients with early DN were searched overall from databases.</span> The data were analyzed by R, Generate Mixed Treatment Comparisons and STATA softwares. A total of 78 RCTs were finally included. Network meta-analysis showed that the total effective rate of the <span class="lx-highlight" data-idx="2" style="background-color:#FEF0C3;">Jinshuibao capsule</span>-ACEI/ARB combination group and Huangkui capsule-ACEI/ARB combination groups were better than the others; Jinshuibao capsule-ACEI/ARB combination group reduced the 24-h urinary protein excretion (24-h UTP), urine microalbumin excretion rate (UAER), serum creatinine (Scr), and glycosylated hemoglobin (HbAlc) values. The <span class="lx-highlight" data-idx="3" style="background-color:#FEF0C3;">Huangkui capsule</span>-ACEI/ARB combination demonstrated a better reduction of (blood urea nitrogen [BUN]). Reduced incidences of adverse effects were only observed on treatment with Bailing capsule-ACEI/ARB combination. In early DN, combination of Jinshuibao capsule-ACEI/ARB provided the highest effective rate; moreover, it could reduce the 24-h values of UTP, UAER, Scr, and HbAlc; Huangkuai capsule-ACI/ARB combination group showed a good effect on reducing BUN. Bailing capsule-ACEI/ARB combination group had reduced the incidences of adverse reactions.
  </div>
  <div class="lx-controls">
    <div class="lx-button-row">
      <button class="lx-control-btn" onclick="playPause()">▶️ Play</button>
      <button class="lx-control-btn" onclick="prevExtraction()">⏮ Previous</button>
      <button class="lx-control-btn" onclick="nextExtraction()">⏭ Next</button>
    </div>
    <div class="lx-progress-container">
      <input type="range" id="progressSlider" class="lx-progress-slider"
             min="0" max="3" value="0"
             onchange="jumpToExtraction(this.value)">
    </div>
    <div class="lx-status-text">
      Entity <span id="entityInfo">1/4</span> |
      Pos <span id="posInfo">[225-256]</span>
    </div>
  </div>
</div>

<script>
  (function() {
    const extractions = [{"index": 0, "class": "Purpose", "text": "To systematically evaluate the efficacy and safety of four Chinese patent medicines combined with ACEI/ARB in patients with early DN.", "color": "#C8E6C9", "startPos": 30, "endPos": 481, "beforeText": "The objective of the study is ", "extractionText": "to systematically evaluate the efficacy of four Chinese patent medicines in combination with angiotensin-converting enzyme inhibitors/angiotensin receptor blockers (ACEI/ARB) in the treatment of early diabetic nephropathy (DN). Retrospectively, previously published randomized controlled trials (RCTs) of four different Chinese patent medicines combined with ACEI or ARB in the treatment of patients with early DN were searched overall from databases.", "afterText": " The data were analyzed by R, Generate Mixed Treatment Comparisons and STATA softwares. A total of 78 RCTs were finally included. Network meta-analysi", "attributesHtml": "<div><strong>class:</strong> Purpose</div><div><strong>attributes:</strong> {}</div>"}, {"index": 1, "class": "Background", "text": "Early diabetic nephropathy (DN) is commonly treated with ACE inhibitors or ARBs, but optimal adjunct therapies remain unclear.", "color": "#D2E3FC", "startPos": 225, "endPos": 256, "beforeText": "ur Chinese patent medicines in combination with angiotensin-converting enzyme inhibitors/angiotensin receptor blockers (ACEI/ARB) in the treatment of ", "extractionText": "early diabetic nephropathy (DN)", "afterText": ". Retrospectively, previously published randomized controlled trials (RCTs) of four different Chinese patent medicines combined with ACEI or ARB in th", "attributesHtml": "<div><strong>class:</strong> Background</div><div><strong>attributes:</strong> {}</div>"}, {"index": 2, "class": "Results", "text": "Jinshuibao capsule + ACEI/ARB achieved the highest total effective rate and significantly reduced 24\u2011h urinary protein, urine microalbumin excretion, serum creatinine, and HbA1c.", "color": "#FEF0C3", "startPos": 677, "endPos": 695, "beforeText": "reatment Comparisons and STATA softwares. A total of 78 RCTs were finally included. Network meta-analysis showed that the total effective rate of the ", "extractionText": "Jinshuibao capsule", "afterText": "-ACEI/ARB combination group and Huangkui capsule-ACEI/ARB combination groups were better than the others; Jinshuibao capsule-ACEI/ARB combination grou", "attributesHtml": "<div><strong>class:</strong> Results</div><div><strong>attributes:</strong> {}</div>"}, {"index": 3, "class": "Results", "text": "Huangkui capsule + ACEI/ARB showed the greatest reduction in blood urea nitrogen (BUN).", "color": "#FEF0C3", "startPos": 1016, "endPos": 1032, "beforeText": "inary protein excretion (24-h UTP), urine microalbumin excretion rate (UAER), serum creatinine (Scr), and glycosylated hemoglobin (HbAlc) values. The ", "extractionText": "Huangkui capsule", "afterText": "-ACEI/ARB combination demonstrated a better reduction of (blood urea nitrogen [BUN]). Reduced incidences of adverse effects were only observed on trea", "attributesHtml": "<div><strong>class:</strong> Results</div><div><strong>attributes:</strong> {}</div>"}];
    let currentIndex = 0;
    let isPlaying = false;
    let animationInterval = null;
    let animationSpeed = 1.0;

    function updateDisplay() {
      const extraction = extractions[currentIndex];
      if (!extraction) return;

      document.getElementById('attributesContainer').innerHTML = extraction.attributesHtml;
      document.getElementById('entityInfo').textContent = (currentIndex + 1) + '/' + extractions.length;
      document.getElementById('posInfo').textContent = '[' + extraction.startPos + '-' + extraction.endPos + ']';
      document.getElementById('progressSlider').value = currentIndex;

      const playBtn = document.querySelector('.lx-control-btn');
      if (playBtn) playBtn.textContent = isPlaying ? '⏸ Pause' : '▶️ Play';

      const prevHighlight = document.querySelector('.lx-text-window .lx-current-highlight');
      if (prevHighlight) prevHighlight.classList.remove('lx-current-highlight');
      const currentSpan = document.querySelector('.lx-text-window span[data-idx="' + currentIndex + '"]');
      if (currentSpan) {
        currentSpan.classList.add('lx-current-highlight');
        currentSpan.scrollIntoView({block: 'center', behavior: 'smooth'});
      }
    }

    function nextExtraction() {
      currentIndex = (currentIndex + 1) % extractions.length;
      updateDisplay();
    }

    function prevExtraction() {
      currentIndex = (currentIndex - 1 + extractions.length) % extractions.length;
      updateDisplay();
    }

    function jumpToExtraction(index) {
      currentIndex = parseInt(index);
      updateDisplay();
    }

    function playPause() {
      if (isPlaying) {
        clearInterval(animationInterval);
        isPlaying = false;
      } else {
        animationInterval = setInterval(nextExtraction, animationSpeed * 1000);
        isPlaying = true;
      }
      updateDisplay();
    }

    window.playPause = playPause;
    window.nextExtraction = nextExtraction;
    window.prevExtraction = prevExtraction;
    window.jumpToExtraction = jumpToExtraction;

    updateDisplay();
  })();
</script>